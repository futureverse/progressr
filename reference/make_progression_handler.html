<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates a Progression Calling Handler — make_progression_handler • progressr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates a Progression Calling Handler — make_progression_handler"><meta name="description" content="A progression calling handler is a function that takes a base::condition
as its first argument and that can be use together with
base::withCallingHandlers().  This function helps creating such
progression calling handler functions."><meta property="og:description" content="A progression calling handler is a function that takes a base::condition
as its first argument and that can be use together with
base::withCallingHandlers().  This function helps creating such
progression calling handler functions."><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">progressr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.15.1-9010</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/progressr-intro.html">progressr: An Introduction</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.futureverse.org/"><span class="fa fas fa-home"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Packages</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-packages"><li><a class="external-link dropdown-item" href="https://doFuture.futureverse.org">doFuture (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://furrr.futureverse.org">furrr (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.futureverse.org">future</a></li>
    <li><a class="external-link dropdown-item" href="https://future.apply.futureverse.org">future.apply (map-reduce)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.batchtools.futureverse.org">future.batchtools (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.callr.futureverse.org">future.callr (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mirai.futureverse.org">future.mirai (backend)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tests.futureverse.org">future.tests</a></li>
    <li><a class="external-link dropdown-item" href="https://globals.futureverse.org">globals</a></li>
    <li><a class="external-link dropdown-item" href="https://listenv.futureverse.org">listenv</a></li>
    <li><a class="external-link dropdown-item" href="https://parallelly.futureverse.org">parallelly</a></li>
    <li><a class="dropdown-item" href="https://progressr.futureverse.org">progressr</a></li>
    <li><a class="external-link dropdown-item" href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.tools.futureverse.org">future.tools (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://future.mapreduce.futureverse.org">future.mapreduce (experimental)</a></li>
    <li><a class="external-link dropdown-item" href="https://marshal.futureverse.org">marshal (experimental)</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cloud.r-project.org/package=progressr"><span class="fa fab fa-r-project"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/futureverse/progressr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creates a Progression Calling Handler</h1>
      <small class="dont-index">Source: <a href="https://github.com/futureverse/progressr/blob/HEAD/R/make_progression_handler.R" class="external-link"><code>R/make_progression_handler.R</code></a></small>
      <div class="d-none name"><code>make_progression_handler.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A progression calling handler is a function that takes a <a href="https://rdrr.io/r/base/conditions.html" class="external-link">base::condition</a>
as its first argument and that can be use together with
<code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">base::withCallingHandlers()</a></code>.  This function helps creating such
progression calling handler functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_progression_handler</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  reporter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  handler <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  enable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"progressr.enable"</span>, <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  enable_after <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"progressr.enable_after"</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"progressr.times"</span>, <span class="op">+</span><span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  interval <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"progressr.interval"</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  intrusiveness <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  clear <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"progressr.clear"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  target <span class="op">=</span> <span class="st">"terminal"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>(character) Name of progression handler.</p></dd>


<dt id="arg-reporter">reporter<a class="anchor" aria-label="anchor" href="#arg-reporter"></a></dt>
<dd><p>(list) A named list of reporter functions.</p></dd>


<dt id="arg-handler">handler<a class="anchor" aria-label="anchor" href="#arg-handler"></a></dt>
<dd><p>(function) Function take a <a href="progression.html">progression</a> condition
as the first argument.</p></dd>


<dt id="arg-enable">enable<a class="anchor" aria-label="anchor" href="#arg-enable"></a></dt>
<dd><p>(logical) If FALSE, then progress is not reported.</p></dd>


<dt id="arg-enable-after">enable_after<a class="anchor" aria-label="anchor" href="#arg-enable-after"></a></dt>
<dd><p>(numeric) Delay (in seconds) before progression
updates are reported.</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>(numeric) The maximum number of times this handler
should report progression updates.
If zero, then progress is not reported.</p></dd>


<dt id="arg-interval">interval<a class="anchor" aria-label="anchor" href="#arg-interval"></a></dt>
<dd><p>(numeric) The minimum time (in seconds) between
successive progression updates from this handler.</p></dd>


<dt id="arg-intrusiveness">intrusiveness<a class="anchor" aria-label="anchor" href="#arg-intrusiveness"></a></dt>
<dd><p>(numeric) A non-negative scalar on how intrusive
(disruptive) the reporter to the user.</p></dd>


<dt id="arg-clear">clear<a class="anchor" aria-label="anchor" href="#arg-clear"></a></dt>
<dd><p>(logical) If TRUE, any output, typically visual, produced
by a reporter will be cleared/removed upon completion, if possible.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>(character vector) Specifies where progression updates are
rendered.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code>make_progression_handler()</code>
or not used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A function of class <code>progression_handler</code> that takes a
<a href="progression.html">progression</a> condition as its first and only argument.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The inner details of progression handlers and how to use this function
are still to be documented.  Until then, see the source code of existing
handlers for how it is used, e.g. <code><a href="handler_txtprogressbar.html">progressr::handler_txtprogressbar</a></code>.
Please use with care as things might change.</p>
    </div>
    <div class="section level2">
    <h2 id="reporter-functions">Reporter functions<a class="anchor" aria-label="anchor" href="#reporter-functions"></a></h2>


<p>The <code>reporter</code> argument should be a named list of zero or more of the
following functions:</p><ul><li><p><code>initiate</code></p></li>
<li><p><code>update</code></p></li>
<li><p><code>finish</code></p></li>
</ul><p>These functions are called whenever a <a href="progression.html">progression</a> condition of type
<code>"initiate"</code>, <code>"update"</code>, or <code>"finish"</code> are received, but only if the
condition is for the progression that is currently handled.
These functions are called with the following arguments (in order):</p><ul><li><p><code>config</code> - a named list of the configuration of the progression handler:
<code>max_steps</code> (integer),
<code>interval</code> (numeric),
<code>enable_after</code> (numeric),
<code>auto_finish</code> (logical),
<code>clear</code> (logical),
<code>target</code> (character vector)</p></li>
<li><p><code>state</code> - a named list of the current progress state after accounting
for the most recent <code>progression</code> condition:
<code>step</code> (integer), <code>message</code> (character),
<code>delta</code> (integer),
<code>enabled</code> (logical),
<code>timestamps</code> (POSIXct vector)</p></li>
<li><p><code>progression</code> - a <a href="progression.html">progression</a> condition</p></li>
<li><p>... - not used (reserved for future needs)</p></li>
</ul><p>In addition to the above functions, the following functions:</p><ul><li><p><code>hide</code></p></li>
<li><p><code>unhide</code></p></li>
<li><p><code>reset</code></p></li>
<li><p><code>interrupt</code></p></li>
</ul><p>are called whenever the handler "should" hide or unhide the rendered
progress, or reset it, or when an interrupt is detected.  In these cases,
the <code>progression</code> argument is of class <code>control_progression</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">base::withCallingHandlers()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Create a progression handler that reports on the current progress</span></span></span>
<span class="r-in"><span><span class="co">## step, the relative change, and the current progress message. This</span></span></span>
<span class="r-in"><span><span class="co">## is only reported on positive progressions updated</span></span></span>
<span class="r-in"><span><span class="va">my_handler</span> <span class="op">&lt;-</span> <span class="fu">make_progression_handler</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"my"</span>, reporter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  update <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">config</span>, <span class="va">state</span>, <span class="va">progression</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="va">progression</span><span class="op">$</span><span class="va">amount</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"step = %d (+%g): message = %s"</span>,</span></span>
<span class="r-in"><span>                      <span class="va">state</span><span class="op">$</span><span class="va">step</span>,</span></span>
<span class="r-in"><span>                      <span class="va">progression</span><span class="op">$</span><span class="va">amount</span>,</span></span>
<span class="r-in"><span>                      <span class="fu"><a href="https://rdrr.io/r/base/sQuote.html" class="external-link">sQuote</a></span><span class="op">(</span><span class="va">state</span><span class="op">$</span><span class="va">message</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="handlers.html">handlers</a></span><span class="op">(</span><span class="va">my_handler</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="with_progress.html">with_progress</a></span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="slow_sum.html">slow_sum</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> M: Added value 1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> M: Added value 2</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> M: Added value 3</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> M: Added value 4</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> M: Added value 5</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9007.</p>
</div>

    </footer></div>





  </body></html>

